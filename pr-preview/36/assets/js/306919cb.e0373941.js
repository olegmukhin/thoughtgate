"use strict";(globalThis.webpackChunkthoughtgate_docs=globalThis.webpackChunkthoughtgate_docs||[]).push([[360],{8453(e,r,t){t.d(r,{R:()=>s,x:()=>c});var n=t(6540);const i={},d=n.createContext(i);function s(e){const r=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(d.Provider,{value:r},e.children)}},9093(e,r,t){t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>s,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"reference/configuration","title":"Configuration Reference","description":"ThoughtGate is configured via environment variables.","source":"@site/docs/reference/configuration.md","sourceDirName":"reference","slug":"/reference/configuration","permalink":"/pr-preview/36/docs/reference/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/thoughtgate/thoughtgate/tree/main/website/docs/reference/configuration.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Troubleshoot Common Issues","permalink":"/pr-preview/36/docs/how-to/troubleshoot"},"next":{"title":"Policy Syntax Reference","permalink":"/pr-preview/36/docs/reference/policy-syntax"}}');var i=t(4848),d=t(8453);const s={sidebar_position:1},c="Configuration Reference",l={},h=[{value:"Core Settings",id:"core-settings",level:2},{value:"Policy Settings",id:"policy-settings",level:2},{value:"Slack Integration",id:"slack-integration",level:2},{value:"Observability",id:"observability",level:2},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Minimal",id:"minimal",level:3},{value:"With Slack Approvals",id:"with-slack-approvals",level:3},{value:"Docker",id:"docker",level:3},{value:"Admin Endpoints",id:"admin-endpoints",level:2},{value:"Prometheus Metrics",id:"prometheus-metrics",level:2}];function o(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"configuration-reference",children:"Configuration Reference"})}),"\n",(0,i.jsx)(r.p,{children:"ThoughtGate is configured via environment variables."}),"\n",(0,i.jsx)(r.h2,{id:"core-settings",children:"Core Settings"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Variable"}),(0,i.jsx)(r.th,{children:"Required"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_UPSTREAM_URL"})}),(0,i.jsx)(r.td,{children:"Yes"}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsx)(r.td,{children:"Upstream MCP server URL"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_OUTBOUND_PORT"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"8080"})}),(0,i.jsx)(r.td,{children:"Port for proxy traffic"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_ADMIN_PORT"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"8081"})}),(0,i.jsx)(r.td,{children:"Port for health/metrics endpoints"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_REQUEST_TIMEOUT_SECS"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"30"})}),(0,i.jsx)(r.td,{children:"Upstream request timeout"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"policy-settings",children:"Policy Settings"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Variable"}),(0,i.jsx)(r.th,{children:"Required"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_CEDAR_POLICY_PATH"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:"(embedded)"}),(0,i.jsx)(r.td,{children:"Path to Cedar policy file"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_POLICY_RELOAD_SECS"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"10"})}),(0,i.jsx)(r.td,{children:"Policy file watch interval"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"slack-integration",children:"Slack Integration"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Variable"}),(0,i.jsx)(r.th,{children:"Required"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_SLACK_BOT_TOKEN"})}),(0,i.jsx)(r.td,{children:"For approvals"}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsxs)(r.td,{children:["Slack Bot OAuth token (",(0,i.jsx)(r.code,{children:"xoxb-..."}),")"]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_SLACK_CHANNEL"})}),(0,i.jsx)(r.td,{children:"For approvals"}),(0,i.jsx)(r.td,{children:"\u2014"}),(0,i.jsxs)(r.td,{children:["Channel for approval messages (e.g., ",(0,i.jsx)(r.code,{children:"#approvals"}),")"]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_APPROVAL_TIMEOUT_SECS"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"300"})}),(0,i.jsx)(r.td,{children:"Max time to wait for approval (5 min)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_APPROVAL_POLL_INTERVAL_SECS"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"5"})}),(0,i.jsx)(r.td,{children:"Slack polling interval"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"observability",children:"Observability"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Variable"}),(0,i.jsx)(r.th,{children:"Required"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_LOG_LEVEL"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"info"})}),(0,i.jsxs)(r.td,{children:["Log level: ",(0,i.jsx)(r.code,{children:"trace"}),", ",(0,i.jsx)(r.code,{children:"debug"}),", ",(0,i.jsx)(r.code,{children:"info"}),", ",(0,i.jsx)(r.code,{children:"warn"}),", ",(0,i.jsx)(r.code,{children:"error"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_LOG_FORMAT"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"text"})}),(0,i.jsxs)(r.td,{children:["Log format: ",(0,i.jsx)(r.code,{children:"text"})," or ",(0,i.jsx)(r.code,{children:"json"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"THOUGHTGATE_METRICS_ENABLED"})}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"true"})}),(0,i.jsx)(r.td,{children:"Enable Prometheus metrics"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,i.jsx)(r.h3,{id:"minimal",children:"Minimal"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"export THOUGHTGATE_UPSTREAM_URL=http://mcp-server:3000\n./thoughtgate\n"})}),"\n",(0,i.jsx)(r.h3,{id:"with-slack-approvals",children:"With Slack Approvals"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'export THOUGHTGATE_UPSTREAM_URL=http://mcp-server:3000\nexport THOUGHTGATE_CEDAR_POLICY_PATH=/etc/thoughtgate/policy.cedar\nexport THOUGHTGATE_SLACK_BOT_TOKEN=xoxb-your-token\nexport THOUGHTGATE_SLACK_CHANNEL="#approvals"\nexport THOUGHTGATE_APPROVAL_TIMEOUT_SECS=600\n./thoughtgate\n'})}),"\n",(0,i.jsx)(r.h3,{id:"docker",children:"Docker"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'docker run -d \\\n  -p 8080:8080 \\\n  -p 8081:8081 \\\n  -e THOUGHTGATE_UPSTREAM_URL=http://host.docker.internal:3000 \\\n  -e THOUGHTGATE_SLACK_BOT_TOKEN=xoxb-your-token \\\n  -e THOUGHTGATE_SLACK_CHANNEL="#approvals" \\\n  -v /path/to/policy.cedar:/etc/thoughtgate/policy.cedar \\\n  -e THOUGHTGATE_CEDAR_POLICY_PATH=/etc/thoughtgate/policy.cedar \\\n  ghcr.io/thoughtgate/thoughtgate:latest\n'})}),"\n",(0,i.jsx)(r.h2,{id:"admin-endpoints",children:"Admin Endpoints"}),"\n",(0,i.jsxs)(r.p,{children:["Available on ",(0,i.jsx)(r.code,{children:"THOUGHTGATE_ADMIN_PORT"}),":"]}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Endpoint"}),(0,i.jsx)(r.th,{children:"Method"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/health"})}),(0,i.jsx)(r.td,{children:"GET"}),(0,i.jsx)(r.td,{children:"Liveness check (returns 200 if running)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/ready"})}),(0,i.jsx)(r.td,{children:"GET"}),(0,i.jsx)(r.td,{children:"Readiness check (returns 200 if ready for traffic)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"/metrics"})}),(0,i.jsx)(r.td,{children:"GET"}),(0,i.jsx)(r.td,{children:"Prometheus metrics"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"prometheus-metrics",children:"Prometheus Metrics"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-prometheus",children:'# Request counts by tier\nthoughtgate_requests_total{tier="green|amber|red"}\n\n# Request latency histogram\nthoughtgate_request_duration_seconds{tier="..."}\n\n# Approval outcomes\nthoughtgate_approvals_total{result="approved|rejected|timeout"}\n\n# Upstream request results\nthoughtgate_upstream_requests_total{status="success|error|timeout"}\n\n# Policy evaluation latency\nthoughtgate_policy_eval_duration_seconds\n'})})]})}function a(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);